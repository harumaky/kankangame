# カンカンするゲーム
よくみるボール反射ゲーム。
Brick Crusherとかもっといい名前があっただろうけど、そこについてはノータッチで。

## Function
スタート（Canvasコンテキストをクリック）すると左右に揺れる矢印が現れる。
もう一度コンテキスト（または矢印の上）をクリックすると、その方向にボールが発射される。

ボールはボックス（数字を持ったブロック）にあたると反射する。
その際、ボックスの数字が減り、0になると消える。

ボールは下部の赤い部分（DeadZone）に接触すると描画の更新が止まり、ゲーム終了。

終了後の結果アラートをOKすると、初期画面に戻る。

## 仕組み
### start(initGame())
Ball、Box、DeadZone各クラスを用意し、
initgame()でインスタンスを作成、この時、Boxは複数作成され、boxes配列に格納される。

矢印がスイングしている状態でクリックしたら、Canvas全体の描画を更新し続けるsetIntervalが発火。

### ゲーム描画(update())
このsetIntervalがコールバックするupdate関数では
- コンテクストをリセット(clearRect)
- 判定
  - ボールが壁に当たっているか(Ballのインスタンスメソッド)
  - boxes配列をforeachして、各ボックス内にボールが侵入しているか判定
  - 上がTrueのとき、ボールが縦方向(V) or 横方向（H）の面に入ってきたのかを判定
    - **breakでループを抜ける**(一度のupdate()でのボックス反射は一度だけ)
- 判定に基づく操作
  - ボール
    - 左右の壁に当たったら速度vx *= -1でx軸方向の速度を反転
    - 上の壁の場合、vy *= -1
    - デットゾーン（下部に入ったら）finishGame()
  - ボックス
    - 左右面に接触->ボールのvx *= -1 
    - 上下面 -> vy *= -1
    - いづれも、metBox()メソッドを発火でスコア+1、ボックスの数字-1
    - もし、数字-1して0になる時、boxesからインスタンス変数idを参照してspliceで削除
- 描画
  - Ball, Boxのdrawメソッドで描画
  - デットゾーンを描画（drawメソッドで背景色をボール位置に基づき判定）

### finish(finishGame())
clearIntervalでupdateの繰り返しをストップ
alert()結果スコア表示
initGame()
